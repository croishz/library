<!DOCTYPE html>
<html lang="en">
<head>
    <title>Date</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- CSS -->
    <style>
        .wrap {display:inline-block; border-left:1px solid; border-top:1px solid; border-color:steelblue;}
        /* .wrap:after {content:""; display: block; clear: both;} */
        .cal {display:none;}
        .daybox {float:left; width:85px; height:60px; line-height:59px; border:1px solid steelblue; border-top:none; border-left:none; text-align:center;}
        .daybox:nth-of-type(7n+1) {clear:both;}
        .daybox:not(.before):not(.after) {
            cursor:pointer;
        }
        .daybox.before, .daybox.after {background-color:#eee;}
    </style>
    
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-2.2.4.js"></script>
    <script>
        /*
            참조 
            http://blog.naver.com/PostView.nhn?blogId=qkddudgh2001&logNo=50098540956
            https://codepen.io/alenabdula/pen/OPEpGL
        */ 
        window.onload = function(){
            console.log("ready");
            function calendar(e){
                var dt = new Date(),
                    dayOrder = dt.getDay(), 
                    day = dt.getDate(),
                    month = dt.getMonth() + 1,
                    year = dt.getFullYear();

                // console.log(dayOrder);
                console.log(year, month, day);
                
                // 영미권 전환.
                var _nameOf_ = {
                    months : [ "January" , "February" , "March" , "April" ,"May","June","July","August","September","October","November","December"],
                    monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
                    days : ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
                    daysShort:["Sun","Mon","Tues","Wed","Thu","Fri","Sat"]
                }
                // 월별 시일과 막일의 요일 반환. 
                var dateOrderReturn = function(month, year){
                    console.log("day return");
                    console.log(year + "년," + month + "월");

                    var month = month -1;
                    var a = new Date(year, month, 1),
                        // b = _nameOf_.days[a.getDay()],
                        t = a.getDay(),
                        c = new Date(year, month, totalDaysReturn(month, year) ),
                        // d = _nameOf_.days[c.getDay()];
                        l = c.getDay();
                    console.log("시일의 요일 : " + t + "막일의 요일 : " + l);
                    return(stDate = t, flDate = l);
                };
                
                // 월별 일수 설정.
                var totalDaysReturn = function(month, year){
                    // console.log("total day return");
                    // console.log(month);
                    
                    // switch state
                    // switch(month){
                    //     case 4 : 
                    //     case 6 : 
                    //     case 9 : 
                    //     case 11 :
                    //         return 30;
                    //     break;
                    //     case 1 :
                    //     case 3 :  
                    //     case 5 :  
                    //     case 7 :  
                    //     case 8 : 
                    //     case 10 : 
                    //     case 12 :
                    //         return 31;
                    //     break;
                    //     case 2 : 
                    //         /*
                    //             leap year 
                    //             1. each four years 
                    //             2. but not each 100 years out of count.
                    //             3. but not each fourth 100 years incount again.
                    //         */
                    //         if( ( year%100 !== 0 && year%4 === 0 ) || year%400 === 0 ){
                    //             return 29;
                    //         }else{
                    //             return 28;
                    //         }
                    //     break;
                    // }

                    // if state by variable return
                    // var a = 0;
                    // if(month === 4 || month === 6 || month === 9 || month === 11){
                    //     a = 30;
                    // }else if(month === 2){
                    //     ( (year%100 !== 0 && year%4 === 0) || year%400 === 0 ) ? a = 29 : a = 28;
                    // }else{
                    //     a = 31;
                    // }
                    // return a;

                    if(month === 4 || month === 6 || month === 9 || month === 11){
                        return 30;
                    }else if(month === 2){
                        return ( (year%100 !== 0 && year%4 === 0) || year%400 === 0 ) ? 29 : 28;
                    }else{
                        return 31;
                    }
                };
                // 화면 출력.
                var daySpread = function(monthLength, stDate, flDate){
                    console.log(month-1);
                    // console.log("done");
                    var reverseDate = totalDaysReturn( (month-1), year);
                    for(var i=reverseDate; i<=reverseDate; i++){
                        var c = new Date(year, totalDaysReturn( (month-1), year), i)
                        $(".wrap").append("<div class=\"daybox before\">"+i+"</div>");
                    }

                    for(var i=1; i<=monthLength; i++){
                        // $(".wrap").append( $("span.day") ).$(".day").eq(i)
                        $(".wrap").append("<div class=\"daybox\">"+i+"</div>");

                        var c = new Date(year, month-1, i),
                        d = c.getDay();
                        if( d === 6 );
                        $(".daybox:not(.before)").eq(i-1).prepend("<span>"+_nameOf_.daysShort[d]+"</span>");
                    }
                    
                    for(var i=1; i< 6+7 - flDate; i++){
                        $(".wrap").append("<div class=\"daybox after\">"+i+"</div>");
                    }
                    
                }
                dateOrderReturn(month, year);
                daySpread( totalDaysReturn(month, year), stDate, flDate );
                var selectDay = (function(){
                    $(".daybox:not(.before):not(.after)").on("click", function(){
                        console.log("slct day");
                        alert($(this).text());
                    });
                })();
            }
            calendar();

            // var st = 01234;
            // var frame = "<section class=\"frame\">";
            //     frame += "<div class=\"fr_container\">";
            //     frame += "<span>" + toString(st) + "</span>";
            //     frame += "</div>";
            //     frame += "</section>";
            //     $(".wrap").append(frame),
            //     0;
        }
    </script>
    <style>
        /*@media (min-device-width:1200px){
            body {background-color: crimson}
        }
        @media (min-width:1200px){
            body {background-color: crimson}
        } */
    </style>
</head>
<body>
    <div class="wrap">
        <article class="cal">
            <div class="line_ui">
                <button class="prev_y">prev year</button>
                <button class="prev">prev month</button>
                <h1 class="head_time" style="text-transform: capitalize;">october</h1>
                <button class="next">next month</button>
                <button class="next_y">next year</button>
            </div>
            <div class="area_time">
                <div class="line_week">
                    <div class="cell_day"></div>
                </div>
            </div>
        </article>

    </div>
</body>
</html>