<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Remove to repeat</title>
</head>
<body>
    <style>
        .list {height:60px; border:1px solid tan;}
        .layer {width:500px; height:500px; border:1px solid #cecece;}
    </style>
    <div class="listbox">
        <ul class="list order1"></ul>
        <ul class="list order2"></ul>
        <ul class="list order3"></ul>
    </div>
    <div>
        <div class="layer order1"></div>
        <div class="layer order2"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script>
        console.log("%cGet started", "color:steelblue;background-color:#f8f8f8;padding:0 10px;");

        // start sampling
        dropdown
        $(".list").on("click", function(e){
            // console.log(
            //     "e.currentTarget : ", e.currentTarget,
            //     "e.target : ", e.target,
            //     "this : ", this
            // );
            if( $(e.target).hasClass("expand")){
                $(e.target).removeClass("expand");
            }else{
                $(".list").removeClass("expand");
                $(e.target).addClass("expand");
            }
        });
        // event deligation
        console.log(document.querySelectorAll(".listbox"));         // Nodelist
        console.log(document.getElementsByClassName("listbox"));    // HTMLCollection
        
        document.querySelectorAll(".listbox").forEach(element => {
            // console.log(element.classList);
            element.addEventListener("click", function(e){
                console.log(
                    "e.currentTarget : ", e.currentTarget,
                    "e.target : ", e.target,
                    "this : ", this
                );
                if(this.classList.value.indexOf("expand") > 0){
                    e.target.classList.remove("expand");
                }else{
                    // console.log(e.currentTarget.childNodes);
                    e.currentTarget.childNodes.forEach(node => {
                        // console.log(node.nodeName);
                        if(node.nodeName !== "#text" && node.classList.value.indexOf("expand") > 0){
                            node.classList.remove("expand");
                        }
                    })
                    e.target.classList.add("expand");
                }
            })
        });

        // modal
        $(".layer").on("click", function(e){
            if( $(e.target).hasClass("show")){
                $(e.target).removeClass("show");
            }else{
                $(".layer").removeClass("show");
                $(e.target).addClass("show");
            }
        });

        // let remove to repeat code
        // function toggleActive(selector, activeClass){
        //     $(selector).on("click", function(){
        //         if( $(this).hasClass(activeClass)){
        //             $(this).removeClass(activeClass);
        //         }else{
        //             $(selector).removeClass(activeClass);
        //             $(this).addClass(activeClass);
        //         }
        //     });
        // }

        // // toggleActive(".list", "expand");
        // // toggleActive(".layer", "show");

        // const activeDOMs = [".list", ".layer"];
        // const activeClasses = ["expand", "show"];
        // for (let i=0; i<activeDOMs.length; i++){
        //     toggleActive(activeDOMs[i], activeClasses[i]);
        // }

        // // give component identity.

        // function UIComponent(componentType, options){
        //     this.componentType = componentType;

        //     UIComponent.prototype.ToggleActiveByClass = function(options){
        //         const {selector, activeClass} = options;
        //         $(selector).on("click", function(){
        //             if( $(this).hasClass(activeClass)){
        //                 $(this).removeClass(activeClass);
        //             }else{
        //                 $(selector).removeClass(activeClass);
        //                 $(this).addClass(activeClass);
        //             }
        //         }); 
        //     }
        // }

        // const modalLayer1 = new UIComponent("modal");
        // const list1 = new UIComponent("list");
        
        // console.log(modalLayer1);
        // console.log(list1);

        // modalLayer1.ToggleActiveByClass({ 
        //     selector : ".layer.order1",
        //     activeClass : "show" 
        // });
        
        // list1.ToggleActiveByClass({ 
        //     selector : ".list.order1",
        //     activeClass : "expand" 
        // });

        function NodeList(){
            const p = NodeList.prototype;
            p.forEach = function(){
                console.log("overriding");
            }
        } 

        const ee = new NodeList();
        console.log(ee);
    </script>
</body>
</html>