<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>ui sampling - text ellipsis</title>
	<link href="https://fonts.googleapis.com/css?family=Karla&display=swap" rel="stylesheet">
	<style>
		/* variable */
		:root {
			--text-font-size:16px;
			--text-line-height:1.5em;
			--bottom-padding:12px;
			--focus-color:#f12d2d;
		}

		/* reset */
		p {margin:0;}
		em {font-style:normal;}
		html {font-family: 'Karla', sans-serif;}
		/* body {padding: 0;margin: 0;} */
		body {padding: 0;margin: 0;}
		hr {
			border-color:rgb(148, 216, 201);
			border-style:solid;    
		}
		/* common */
		h1 {margin:0.5em 0;}
		h2 {font-size:1.25rem; font-weight: normal; margin:0 0 25px;}
		h2 em {color:#bb8843;}
	</style>
</head>
<body>
	<div class="wrap">
		<h1>Methapor</h1>
		<section class="section-bookends">
			<h2>Bookends <em>transform to arrow</em></h2>
			<!-- methapor - visual : bookends  -->
			<style>
				.wrap {
					/* display:flex;
					flex-wrap:wrap;
					flex-direction:row; */
					padding:20px 0 0 20px;
				
				}
				.text-box {
					position: relative;
					display:inline-block;
					vertical-align:top;
					max-width:400px;
					border-bottom:1px solid transparent;
					font-size:16px;
					line-height:1.5em;
					margin-right:60px;
					margin-bottom:50px;
					padding:12px 0 0 16px;
				}
				.text-box.edge {
					border-top:1px solid #cecece;
					border-left:1px solid #cecece;
				}
				.text-box.emboss {
					box-shadow: -3px -3px 4px hsla(0,0%, 0%, 0.05);
				}
				.paragraph {
					overflow:hidden;
					box-sizing:border-box;
					color:#333;
					max-height:calc(16px*1.5*2);
					margin:0 0 var(--bottom-padding) 0;
				}
				.paragraph > span {display:block;}
				.label {
					opacity:0;
					position: absolute;
					bottom:var(--bottom-padding);
					left: 100%;
					margin: auto;
					width:50px;
					margin-left: -7px;
					height:calc(16px*1.5 - 2px);
					font-size:1.5em;
					line-height:0.25em;
					color: var(--focus-color);
					box-sizing: border-box;
					transition:opacity 200ms ease-out;
				}
				button[type="button"][role-description="expand contents"] {
					position: absolute;
					bottom:5px;
					right:0;
					width:40px;
					height:40px;
					background:none;
					padding:0;
					border:none;
					cursor: pointer;
					transition:transform 300ms ease;
					transform-origin:45% 55%;
				}
				button[type="button"][role-description="expand contents"][disabled],
				button[type="button"][role-description="expand contents"]:disabled {
					display:none;
				}
				.bookends {
					position: absolute;
					bottom:0;
					right:0;
					width:10px;
					height:10px;
					border-right:2px solid lightcoral;
					border-bottom:2px solid lightcoral;
					transition:transform 300ms ease;
					transform-origin:50% 50%;
					background-color:transparent;
				}
				/* event */
				button[type="button"][role-description="expand contents"]:focus {
					outline:none;
				}
				button[type="button"][role-description="expand contents"]:focus .bookends {
					border-color:#f12d2d;
					border-color:#ffa656;
					border-color:var(--focus-color);
				}
				.text-box:hover .paragraph:before {
					opacity:0;
				}
				.text-box:hover .bookends {border-color:var(--focus-color);}
				.text-box:hover button[type="button"][role-description="expand contents"] {
					transform:rotate(45deg);
				}
				.text-box.free .label {display:none;}
				/* steady n ready */
				.text-box:not(.active) .paragraph:before {
					content:"";
					position:absolute;
					right:0;
					bottom:var(--bottom-padding);
					width:calc(16px*1.5);
					height:calc(16px*1.5);
					background: linear-gradient(hsla(0, 100%, 100%, 0.2), hsla(0, 100%, 100%, 1));
					transition:opacity 300ms;
				}
				.text-box:hover:not(.active) .label {
					opacity: 1;
					overflow: hidden;
				}
				.text-box:hover:not(.active) .label span {
					display:inline-block;
					margin:0 1px;
					transform:translateY(0px);
					animation:ellipsis 1600ms infinite;
				}
				.text-box:hover:not(.active) .label span:nth-child(1) {animation-delay:300ms;}
				.text-box:hover:not(.active) .label span:nth-child(2) {animation-delay:700ms;}
				.text-box:hover:not(.active) .label span:nth-child(3) {animation-delay:1100ms;}
				@keyframes ellipsis {
					0% {opacity:1; transform:translate3d(0, 0, 0);}
					50% {opacity:0; transform:translate3d(0, -1px, -6px);}
					100% {opacity:1; transform:translate3d(0, 0, 0);}
				}
				/* active */
				.text-box.active .paragraph {
					max-height:none;
				}
				.text-box.active button[type="button"][role-description="expand contents"] {
					bottom:8px;
					right:-6px;
				}
				.text-box.active .bookends {
					transform-origin:65% 70%;
				}
				.text-box.active:hover .bookends {
					transform:rotate(180deg);
				}
			</style>
			<div class="text-box">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla, pretium quis, sem. Nulla, pretiumquis</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="1" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<div class="text-box edge">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="2" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<div class="text-box emboss">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor.</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="3" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<div class="text-box emboss">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="2" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<div class="text-box edge">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla, pretium quis, sem. Nulla, pretiumquis</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="1" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<div class="text-box edge">
				<p class="paragraph"><span>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor.</span></p>
				<div class="label">
					<!-- <em>More </em> -->
					<span>.</span><span>.</span><span>.</span>
				</div>
				<button data-id="3" class="button-area" type="button" role-description="expand contents"><span class="bookends"></span></button>
			</div><!-- // text-box -->
			<!-- // methapor - visual : bookends  -->
		</section>
		<hr>

		<h1>Frame</h1>
		<section class="section-fade">
			<style>
				.ellipsis-box {
					position:relative;
					width:50%;
					display: block;
					overflow:hidden;
					max-height: 2.8em;
					line-height: 1.4em;
					font-size:1rem;
					transition: max-height 300ms ease-out;
				}
				.ellipsis-box:hover {
					max-height: 3.6em;
				}
				.ellipsis-box:hover:before {
					content:"";
					position:absolute;
					bottom:0; left:0;
					width:100%;
					height:0.4em;
					background:linear-gradient(hsla(0, 100%, 100%, 0), hsla(0, 100%, 100%, 0.75) 40%);
				}
				.ellipsis-box:hover + span:after {
					content:attr(data-guide) " ";
					color:steelblue;
				}
			</style>
			<h2>Text box bottom <em>fadeout by hover</em></h2>
			<div class="ellipsis-box">
				<p>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Lorem ipsum dolor sit amet, Aeneancomm ligula eget dolor. Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor.</p>
			</div>
			<span data-guide="Read more"></span>
		</section>
		<hr>
		<style>
			.text-booth {
				position:relative;
				/* width:400px;
				display: block;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				text-overflow:ellipsis;
				overflow:hidden;
				max-height: 60px;
				line-height: 20px; */
				width:730px;
			}
			.text-booth p {
				position:relative;
				z-index:1;
				background-color:rgba(94, 80, 223, 0.12);
			}
			.effect-layer {
				position:absolute;
				top:0; left:0;
			}
		</style>
		<div class="text-booth">
			<p>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Lorem ipsum dolor sit amet, Aeneancomm ligula eget dolor. Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor.</p>
			<p>Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor. Lorem ipsum dolor sit amet, Aenean commodo ligula eget dolor.</p>
			<canvas class="effect-layer" id="effect_layer_0001"></canvas>
		</div>
		
		
	</div>
	<script>
		const tg = document.querySelectorAll(".button-area");
		const container = document.querySelectorAll(".text-box");
		const containerH = parseInt(window.getComputedStyle(container[0], null).getPropertyValue("height"));
		const content = document.querySelectorAll(".paragraph span");

		content.forEach( (elem, index)=>{
			// caculate box
			let elemH = parseInt(window.getComputedStyle(elem, null).getPropertyValue("height"));
			if(elemH > containerH ){
				return;
			}else{
				tg[index].setAttribute("disabled", true);
				container[index].classList.add("free");
			}
		});

		tg.forEach( (elem)=>{
			// event resigt 
			elem.activeChecker = false;

			elem.addEventListener(
				"click", function(){
					this.activeChecker = !this.activeChecker;
					this.activeChecker ? this.parentElement.classList.add("active") : this.parentElement.classList.remove("active");
				}
			);
			// elem.addEventListener(
			//     "mouseenter", function(){
			//         console.log(this.activeChecker);
			//         this.activeChecker ? this.parentElement.classList.remove("steady") : this.parentElement.classList.add("steady");
			//     }
			// );
			// elem.addEventListener(
			//     "mouseleave", function(){
			//         console.log(this.activeChecker);
			//         this.activeChecker ? this.parentElement.classList.add("steady") : this.parentElement.classList.remove("steady");
			//     }
			// );
		})
	</script>
	<script>
		const booth = document.querySelectorAll(".text-booth");

		function EffectLayer(layer, idx){
			// console.dir(layer);
			this.layer = layer;
			this.layerW = layer.clientWidth;
			this.layerH = layer.children[0].clientHeight;
			this.idx = idx;
			console.dir(this);

			const canvas = document.getElementById("effect_layer_000" + (this.idx + 1));
			canvas.width = this.layerW;
			canvas.height = this.layerH;
		}
		booth.forEach( (elem, index)=>{
			const effectLayer = []; 
			effectLayer[index]= new EffectLayer(elem, index);
		})
	</script>
</body>
</html>